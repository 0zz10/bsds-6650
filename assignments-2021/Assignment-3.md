# CS6650 Summer 2021  Assignment 3

## Adding Persistence
This assignment builds on assignment 2. The main aim is to persist the tuples generated by the word count algorithm in a database.
We'll also make minor changes to the client to test out database reads as well as writes.

## Step 1 - Add a Database
In assgnment 2, your consumer created an in-memory hash map to store the cummulative results of the word count algorithm. 
Your first task is to modify the consumer to persist the results to a database. 

You are free to choose any database you like. AWS RDS instances like MySQL, DynamoDB, MongoDB, Aurora - all good candidates. 
Whatever database you choose, the challenge is to write to the databse ideally as fast as you can consume messages from RabbitMQ.

Test this configuration by reporting the same results as assignment 2 for 64, 128, 256 clients

## Step 2
Take a look at the [new version of the API](https://app.swaggerhub.com/apis/gortonator/TextProcessor/1.0.4). A GET method has been added.
You need to implement this GET method as part of your servlet. It accepts the arguments in the URL and queries the database to return the count of teh specified word.

Test this out with POSTMAN or your fave HTTP testing tool. Make sure it works. 

## Step 3
Time to modify your client. When you start you client threads to POST lines to the server, start one more thread. This *getThread* simply:
* sleeps for 1 second
* Makes 10 calls to the GET method in your servlet. Use any 10 words from the test data that make sense - e.g. "the' :)

When all the POST threads have completed, implement a simple mechanism (global variable is fine!) for main() to signal to the getThread that it should terminate.
Before terminating the getThread should print out the number of requests sent and the mean and max response time for all GET requests.
main() should block until getThread has completed before calculating and printing out the test results for POSTs as per earlier assignments.

## Submission Requirements
Submit your work to Canvas Assignment 3 as a pdf document. The document should contain:

1. The URL for your git repo. Create a new folder for your Assignment 3 server code
1. A short description of your database design and deployment topologies on AWS
1. Test runs (command windows, RMQ management windows showing queue size, send/receive rates) for 64, 128, 256 client threads for Step 1.
1. The client windows showing results for Step 3, including the mean response time for GET requests. 

## Grading:
1. Server and database implementations working (10 points)
1. Database design description (5 points) 
1. Step 1 Results (15 points) - can you achieve the same client throughput and short queue lengths as assignment 2? 
1. Step 3 Results (10 points) - are POST results similar to Step 1? Is the GET mean response time sensible?
1. Bonus Points: Successful tests for step 1 and 3 with 512 threads (1 point each)
1. Bonus Points: Successful tests for step 1 and 3 with 1024 threads (2 points each). Good luck!!

# Deadline: 6/30 11.59pm PST 

## Addendum 
When implementing the GET method in your server, you may want to look at the command query responsibility segregation (CQRS) pattern.
It might give you some inspiration for implemeting your servlet. [Here's a simple description from AWS](https://docs.aws.amazon.com/prescriptive-guidance/latest/modernization-data-persistence/cqrs-pattern.html)

